# Template file for 'reboot-mode'
pkgname=reboot-mode
version=1.0.0
revision=1
short_desc="Reboot a mobile device to a specific mode"
maintainer="Jami Kettunen <jami.kettunen@protonmail.com>"
license="GPL-3.0-or-later"
homepage="https://gitlab.com/postmarketOS/reboot-mode"
distfiles="https://gitlab.com/postmarketOS/$pkgname/-/archive/$version/$pkgname-$version.tar.gz"
checksum=c4e34f77ef09dd7281700255bffe31bdb28ca1b1e12ccb43d74f350459e987cd

if [ -z "$XBPS_CROSS_TRIPLET" ]; then
	makedepends="gcc"
else
	hostmakedepends="cross-$XBPS_CROSS_TRIPLET"
fi

do_build() {
	[ "$XBPS_CROSS_TRIPLET" ] && CROSS_COMPILE="$XBPS_CROSS_TRIPLET-"
	${CROSS_COMPILE}gcc -Wall -Werror -Os $pkgname.c -o $pkgname
}

do_install() {
	vbin $pkgname
	vlicense LICENSE
}
