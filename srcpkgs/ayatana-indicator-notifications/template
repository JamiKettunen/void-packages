# Template file for 'ayatana-indicator-notifications'
pkgname=ayatana-indicator-notifications
version=22.2.0
revision=1
build_style=cmake
hostmakedepends="pkg-config ubports-cmake-extras intltool"
makedepends="glib-devel"
short_desc="The notifications menu indicator for Lomiri"
maintainer="Jami Kettunen <jami.kettunen@protonmail.com>"
license="GPL-3.0-only"
homepage="https://github.com/AyatanaIndicators/ayatana-indicator-notifications"
changelog="https://raw.githubusercontent.com/AyatanaIndicators/ayatana-indicator-notifications/main/ChangeLog"
distfiles="https://github.com/AyatanaIndicators/ayatana-indicator-notifications/archive/refs/tags/${version}.tar.gz"
checksum=42ad1d33638ac8ace5d5f3ef8cd1ea86965f6e3227064fd915d6e71b06315c18

# TODO: contains no unit tests for now
if [ "$XBPS_CHECK_PKGS" ] && [ -z "$CROSS_BUILD" ]; then
	configure_args+=" -DENABLE_TESTS=ON"
fi

# FIXME: build fails with ninja as CMake generator
# https://github.com/AyatanaIndicators/libayatana-common/issues/60
# https://github.com/AyatanaIndicators/ayatana-indicator-notifications/issues/26
make_cmd="make"
export CMAKE_GENERATOR="Unix Makefiles"
